<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Mushii | A Farewell</title>
    <style>
        :root {
            --space-black: #050505;
            --nebula-blue: #0a1a2f;
            --starlight: #e2e2ff;
            --cosmic-purple: #7b2cbf;
            --gravity-cyan: #00f2ff;
            --gold-accent: #ffd700;
            --nebula-pink: #ff6b9d;
            --deep-violet: #4a0080;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
        }

        body {
            background-color: var(--space-black);
            color: var(--starlight);
            font-family: 'Cinzel', 'Georgia', serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* --- Custom Cursor --- */
        .cursor-dot,
        .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
        }

        .cursor-dot {
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #fff, var(--gravity-cyan));
            box-shadow: 0 0 10px var(--gravity-cyan), 0 0 20px var(--gravity-cyan);
        }

        .cursor-outline {
            width: 35px;
            height: 35px;
            border: 1px solid rgba(0, 242, 255, 0.5);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
        }

        .cursor-outline.hovering {
            width: 50px;
            height: 50px;
            background: rgba(0, 242, 255, 0.1);
        }

        /* --- Canvas Layers --- */
        #universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
        }

        #nebula-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.6;
            pointer-events: none;
        }

        #particles-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* --- Cosmic Fog Overlay --- */
        .cosmic-fog {
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(ellipse at 20% 80%, rgba(123, 44, 191, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(0, 242, 255, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 107, 157, 0.08) 0%, transparent 60%);
            z-index: -1;
            pointer-events: none;
            animation: fogPulse 8s ease-in-out infinite;
        }

        @keyframes fogPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* --- Typography & Animations --- */
        h1, h2, h3 {
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        .fade-in-up {
            animation: fadeInUp 1.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
            opacity: 0;
            transform: translateY(40px);
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Entry Overlay --- */
        #entry-screen {
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at center, #0a0a15 0%, #000 100%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 2s ease, visibility 2s, transform 2s ease;
        }

        #entry-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: scale(1.5);
        }

        .entry-portal {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, transparent 30%, rgba(0, 242, 255, 0.1) 60%, transparent 70%);
            animation: portalPulse 3s ease-in-out infinite;
        }

        @keyframes portalPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .entry-rings {
            position: absolute;
            width: 400px;
            height: 400px;
            border: 1px solid rgba(0, 242, 255, 0.2);
            border-radius: 50%;
            animation: ringRotate 20s linear infinite;
        }

        .entry-rings::before,
        .entry-rings::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            border: 1px solid rgba(123, 44, 191, 0.2);
        }

        .entry-rings::before {
            inset: 30px;
            animation: ringRotate 15s linear infinite reverse;
        }

        .entry-rings::after {
            inset: 60px;
            animation: ringRotate 10s linear infinite;
            border-color: rgba(255, 215, 0, 0.15);
        }

        @keyframes ringRotate {
            100% { transform: rotate(360deg); }
        }

        .entry-btn {
            margin-top: 30px;
            padding: 18px 50px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            font-family: inherit;
            letter-spacing: 4px;
            text-transform: uppercase;
            font-size: 0.9rem;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            position: relative;
            overflow: hidden;
            z-index: 10;
        }

        .entry-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 242, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .entry-btn:hover {
            border-color: var(--gravity-cyan);
            text-shadow: 0 0 20px var(--gravity-cyan);
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.3), inset 0 0 30px rgba(0, 242, 255, 0.1);
            transform: scale(1.05);
        }

        .entry-btn:hover::before {
            left: 100%;
        }

        /* --- Main Content --- */
        .content-wrapper {
            max-width: 850px;
            margin: 0 auto;
            padding: 120px 25px;
            opacity: 0;
            transition: opacity 2.5s ease;
            transform: translateZ(0);
        }

        .content-wrapper.visible {
            opacity: 1;
        }

        .title-section {
            text-align: center;
            margin-bottom: 80px;
            position: relative;
        }

        .glitch-text {
            font-size: clamp(2rem, 6vw, 4rem);
            background: linear-gradient(135deg, #fff 0%, #a5a5a5 50%, var(--gravity-cyan) 100%);
            -webkit-background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 60px rgba(0, 242, 255, 0.3);
        }

        .subtitle {
            color: var(--gravity-cyan);
            font-size: 0.85rem;
            letter-spacing: 0.5em;
            opacity: 0.8;
            text-shadow: 0 0 20px rgba(0, 242, 255, 0.5);
        }

        .main-title .highlight {
            background: linear-gradient(135deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        /* --- Music Player --- */
        .music-player {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 25px;
            padding: 25px;
            margin: 0 auto 70px;
            max-width: 420px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 
                0 15px 40px rgba(0,0,0,0.5),
                inset 0 0 30px rgba(0, 242, 255, 0.03);
        }

        .track-info {
            text-align: center;
            margin-bottom: 18px;
        }

        .track-name {
            display: block;
            color: white;
            font-size: 1.15rem;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        .track-artist {
            color: rgba(255,255,255,0.5);
            font-size: 0.8rem;
            font-style: italic;
        }

        #visualizer {
            width: 100%;
            height: 70px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 3px;
        }

        .bar {
            width: 4px;
            background: linear-gradient(to top, var(--deep-violet), var(--cosmic-purple), var(--gravity-cyan));
            border-radius: 3px;
            height: 3px;
            transition: height 0.05s ease;
            box-shadow: 0 0 10px currentColor;
        }

        /* --- Cosmic Memories Grid --- */
        .memories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 35px;
            margin: 70px 0;
        }

        .hologram-card {
            height: 320px;
            background: linear-gradient(135deg, rgba(10, 10, 30, 0.6), rgba(20, 10, 40, 0.4));
            border: 1px solid rgba(0, 242, 255, 0.15);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.4s ease, border-color 0.4s, box-shadow 0.4s;
        }

        .hologram-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--gravity-cyan);
            box-shadow: 
                0 20px 50px rgba(0, 242, 255, 0.2),
                inset 0 0 50px rgba(0, 242, 255, 0.05);
        }

        .hologram-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent, rgba(0, 242, 255, 0.08), transparent);
            transform: translateY(-100%);
            animation: scanline 4s linear infinite;
        }

        .hologram-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.4) 100%);
            pointer-events: none;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        /* CSS Art: Solar System (Enhanced) */
        .solar-system { 
            position: relative; 
            width: 140px; 
            height: 140px; 
        }
        
        .sun { 
            width: 35px; 
            height: 35px; 
            background: radial-gradient(circle, #fff 0%, var(--gold-accent) 50%, #ff6b00 100%); 
            border-radius: 50%; 
            position: absolute; 
            left: 50%; 
            top: 50%; 
            transform: translate(-50%, -50%);
            box-shadow: 
                0 0 30px var(--gold-accent),
                0 0 60px rgba(255, 215, 0, 0.5),
                0 0 100px rgba(255, 107, 0, 0.3);
            animation: sunPulse 3s ease-in-out infinite;
        }

        @keyframes sunPulse {
            0%, 100% { box-shadow: 0 0 30px var(--gold-accent), 0 0 60px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 50px var(--gold-accent), 0 0 80px rgba(255, 215, 0, 0.7); }
        }
        
        .orbit { 
            position: absolute; 
            border: 1px solid rgba(255,255,255,0.15); 
            border-radius: 50%; 
            left: 50%; 
            top: 50%; 
            transform: translate(-50%, -50%); 
            animation: spin linear infinite; 
        }
        
        .orbit-1 { width: 70px; height: 70px; animation-duration: 4s; }
        .orbit-2 { width: 100px; height: 100px; animation-duration: 7s; }
        .orbit-3 { width: 130px; height: 130px; animation-duration: 11s; border-color: rgba(0, 242, 255, 0.1); }
        
        .planet { 
            background: var(--gravity-cyan); 
            border-radius: 50%; 
            position: absolute; 
            box-shadow: 0 0 15px currentColor;
        }
        
        .p1 { width: 8px; height: 8px; top: -4px; left: 50%; transform: translateX(-50%); }
        .p2 { width: 12px; height: 12px; bottom: -6px; left: 50%; transform: translateX(-50%); background: var(--cosmic-purple); }
        .p3 { width: 6px; height: 6px; right: -3px; top: 50%; transform: translateY(-50%); background: var(--nebula-pink); }
        
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }

        /* --- Cosmic Flower SVG Container --- */
        .cosmic-flower-container {
            position: relative;
            width: 180px;
            height: 180px;
        }

        .cosmic-flower {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.5)) drop-shadow(0 0 40px rgba(123, 44, 191, 0.3));
        }

        .flower-glow {
            position: absolute;
            inset: -20px;
            background: radial-gradient(circle, rgba(0, 242, 255, 0.2) 0%, transparent 70%);
            animation: flowerGlow 3s ease-in-out infinite;
            border-radius: 50%;
        }

        @keyframes flowerGlow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .hologram-label {
            position: absolute;
            bottom: 25px;
            font-size: 0.75rem;
            color: var(--gravity-cyan);
            letter-spacing: 3px;
            text-transform: uppercase;
            text-shadow: 0 0 10px var(--gravity-cyan);
            z-index: 10;
        }

        /* --- The Letter --- */
        .letter-container {
            background: linear-gradient(145deg, rgba(255,255,255,0.02), rgba(255,255,255,0.05));
            padding: 55px;
            border-left: 2px solid var(--cosmic-purple);
            margin-top: 60px;
            position: relative;
            border-radius: 0 15px 15px 0;
            box-shadow: 
                0 0 50px rgba(123, 44, 191, 0.1),
                inset 0 0 80px rgba(0, 0, 0, 0.3);
        }

        .letter-container::before {
            content: '';
            position: absolute;
            left: -2px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
            box-shadow: 0 0 20px var(--cosmic-purple);
        }

        .letter-container p {
            margin-bottom: 28px;
            line-height: 1.9;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .highlight {
            color: var(--gravity-cyan);
            font-style: normal;
            text-shadow: 0 0 15px rgba(0, 242, 255, 0.5);
        }

        /* --- Footer Signature --- */
        .signature {
            text-align: center;
            margin-top: 120px;
            padding-bottom: 60px;
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            background: linear-gradient(45deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: signatureGlow 4s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.3));
        }

        @keyframes signatureGlow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.3)); }
            50% { filter: drop-shadow(0 0 40px rgba(123, 44, 191, 0.5)); }
        }

        /* --- Floating Particles CSS Fallback --- */
        .ambient-particles {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-10vh) translateX(20px);
                opacity: 0;
            }
        }

        /* --- Shooting Stars --- */
        .shooting-star {
            position: fixed;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,1));
            border-radius: 50%;
            animation: shootingStar 3s linear infinite;
            opacity: 0;
            z-index: -1;
        }

        @keyframes shootingStar {
            0% { transform: translateX(-100px) translateY(0); opacity: 0; }
            5% { opacity: 1; }
            30% { opacity: 0; }
            100% { transform: translateX(100vw) translateY(300px); opacity: 0; }
        }

        /* --- Mobile Optimization --- */
        @media (max-width: 768px) {
            .glitch-text { font-size: 2rem; }
            .letter-container { padding: 30px; }
            .cursor-dot, .cursor-outline { display: none; }
            .entry-rings { width: 280px; height: 280px; }
            .entry-portal { width: 200px; height: 200px; }
        }

        /* --- Scroll Progress Indicator --- */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--gravity-cyan), var(--cosmic-purple));
            z-index: 9999;
            transform-origin: left;
            transform: scaleX(0);
            box-shadow: 0 0 10px var(--gravity-cyan);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Dancing+Script&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Custom Cursor -->
    <div class="cursor-dot" data-cursor-dot></div>
    <div class="cursor-outline" data-cursor-outline></div>

    <!-- Scroll Progress -->
    <div class="scroll-progress" id="scroll-progress"></div>

    <!-- Background Layers -->
    <canvas id="universe"></canvas>
    <canvas id="nebula-layer"></canvas>
    <canvas id="particles-layer"></canvas>
    <div class="cosmic-fog"></div>

    <!-- Shooting Stars -->
    <div class="shooting-star" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
    <div class="shooting-star" style="top: 30%; left: 60%; animation-delay: 4s;"></div>
    <div class="shooting-star" style="top: 50%; left: 10%; animation-delay: 8s;"></div>

    <!-- Ambient Particles -->
    <div class="ambient-particles" id="ambient-particles"></div>

    <!-- Entry Overlay -->
    <div id="entry-screen">
        <div class="entry-portal"></div>
        <div class="entry-rings"></div>
        <div class="title-section" style="z-index: 10;">
            <h2 class="subtitle">IN MEMORY OF WHAT WAS</h2>
            <h1 class="glitch-text" data-text="A FAREWELL">A FAREWELL</h1>
        </div>
        <button class="entry-btn" id="start-btn">Enter the Cosmos</button>
    </div>

    <!-- Main Content -->
    <div class="content-wrapper" id="main-content">
        
        <div class="title-section fade-in-up main-title">
            <h1>To <span class="highlight">Mushii</span></h1>
            <p class="subtitle">A love written in the stars</p>
        </div>

        <!-- Audio Player -->
        <div class="music-player fade-in-up" style="animation-delay: 0.2s;">
            <div class="track-info">
                <span class="track-name">Pisces</span>
                <span class="track-artist">Tony Ann (Slowed & Reverb)</span>
            </div>
            <div id="visualizer"></div>
            <audio id="bg-music" loop crossorigin="anonymous">
                <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
            </audio>
        </div>

        <!-- Abstract Memories -->
        <div class="memories-grid fade-in-up" style="animation-delay: 0.4s;">
            <!-- Hologram 1: Solar System -->
            <div class="hologram-card">
                <div class="solar-system">
                    <div class="sun"></div>
                    <div class="orbit orbit-1"><div class="planet p1"></div></div>
                    <div class="orbit orbit-2"><div class="planet p2"></div></div>
                    <div class="orbit orbit-3"><div class="planet p3"></div></div>
                </div>
                <span class="hologram-label">Our Universe</span>
            </div>
            
            <!-- Hologram 2: Cosmic Flower -->
            <div class="hologram-card">
                <div class="cosmic-flower-container">
                    <div class="flower-glow"></div>
                    <svg class="cosmic-flower" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <!-- Gradients -->
                            <radialGradient id="centerGlow" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" stop-color="#fff" stop-opacity="1"/>
                                <stop offset="50%" stop-color="#ffd700" stop-opacity="0.8"/>
                                <stop offset="100%" stop-color="#ff6b00" stop-opacity="0.4"/>
                            </radialGradient>
                            
                            <linearGradient id="petalGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#00f2ff" stop-opacity="0.9">
                                    <animate attributeName="stop-color" values="#00f2ff;#7b2cbf;#00f2ff" dur="4s" repeatCount="indefinite"/>
                                </stop>
                                <stop offset="100%" stop-color="#7b2cbf" stop-opacity="0.6">
                                    <animate attributeName="stop-color" values="#7b2cbf;#ff6b9d;#7b2cbf" dur="4s" repeatCount="indefinite"/>
                                </stop>
                            </linearGradient>
                            
                            <linearGradient id="petalGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#ff6b9d" stop-opacity="0.8"/>
                                <stop offset="100%" stop-color="#7b2cbf" stop-opacity="0.5"/>
                            </linearGradient>

                            <linearGradient id="petalGradient3" x1="0%" y1="100%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#4a0080" stop-opacity="0.7"/>
                                <stop offset="100%" stop-color="#00f2ff" stop-opacity="0.4"/>
                            </linearGradient>
                            
                            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>

                            <filter id="softGlow" x="-100%" y="-100%" width="300%" height="300%">
                                <feGaussianBlur stdDeviation="8" result="blur"/>
                                <feMerge>
                                    <feMergeNode in="blur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>

                        <!-- Outer Aura -->
                        <circle cx="100" cy="100" r="80" fill="none" stroke="url(#petalGradient1)" stroke-width="0.5" opacity="0.3">
                            <animate attributeName="r" values="75;85;75" dur="4s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.2;0.5;0.2" dur="4s" repeatCount="indefinite"/>
                        </circle>

                        <!-- Large Outer Petals - Layer 1 -->
                        <g filter="url(#softGlow)">
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite"/>
                                <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="360 100 100" dur="60s" repeatCount="indefinite"/>
                            </ellipse>
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7" transform="rotate(60 100 100)">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite" begin="0.5s"/>
                            </ellipse>
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7" transform="rotate(120 100 100)">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite" begin="1s"/>
                            </ellipse>
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7" transform="rotate(180 100 100)">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite" begin="1.5s"/>
                            </ellipse>
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7" transform="rotate(240 100 100)">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite" begin="2s"/>
                            </ellipse>
                            <ellipse cx="100" cy="45" rx="18" ry="45" fill="url(#petalGradient1)" opacity="0.7" transform="rotate(300 100 100)">
                                <animate attributeName="ry" values="45;50;45" dur="3s" repeatCount="indefinite" begin="2.5s"/>
                            </ellipse>
                        </g>

                        <!-- Middle Petals - Layer 2 -->
                        <g filter="url(#glow)">
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(30 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite"/>
                            </ellipse>
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(90 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite" begin="0.4s"/>
                            </ellipse>
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(150 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite" begin="0.8s"/>
                            </ellipse>
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(210 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite" begin="1.2s"/>
                            </ellipse>
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(270 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite" begin="1.6s"/>
                            </ellipse>
                            <ellipse cx="100" cy="60" rx="12" ry="30" fill="url(#petalGradient2)" opacity="0.8" transform="rotate(330 100 100)">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite" begin="2s"/>
                            </ellipse>
                        </g>

                        <!-- Inner Petals - Layer 3 -->
                        <g filter="url(#glow)">
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9">
                                <animate attributeName="ry" values="18;22;18" dur="2s" repeatCount="indefinite"/>
                            </ellipse>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(45 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(90 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(135 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(180 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(225 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(270 100 100)"/>
                            <ellipse cx="100" cy="75" rx="8" ry="20" fill="url(#petalGradient3)" opacity="0.9" transform="rotate(315 100 100)"/>
                        </g>

                        <!-- Center Core -->
                        <circle cx="100" cy="100" r="15" fill="url(#centerGlow)" filter="url(#glow)">
                            <animate attributeName="r" values="14;18;14" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        
                        <circle cx="100" cy="100" r="8" fill="#fff" opacity="0.9">
                            <animate attributeName="opacity" values="0.7;1;0.7" dur="1.5s" repeatCount="indefinite"/>
                        </circle>

                        <!-- Orbiting Particles -->
                        <circle cx="100" cy="30" r="2" fill="#fff" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="360 100 100" dur="8s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.4;1;0.4" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="170" cy="100" r="1.5" fill="#00f2ff" opacity="0.7">
                            <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="-360 100 100" dur="12s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="100" cy="170" r="2" fill="#ff6b9d" opacity="0.6">
                            <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="360 100 100" dur="10s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="40" cy="100" r="1" fill="#ffd700" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="-360 100 100" dur="6s" repeatCount="indefinite"/>
                        </circle>

                        <!-- Stardust Sparkles -->
                        <circle cx="60" cy="50" r="1" fill="#fff" opacity="0">
                            <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="0s"/>
                        </circle>
                        <circle cx="140" cy="60" r="1.2" fill="#fff" opacity="0">
                            <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="1s"/>
                        </circle>
                        <circle cx="150" cy="140" r="0.8" fill="#fff" opacity="0">
                            <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="2s"/>
                        </circle>
                        <circle cx="50" cy="130" r="1" fill="#fff" opacity="0">
                            <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="1.5s"/>
                        </circle>
                    </svg>
                </div>
                <span class="hologram-label">Eternal Bloom</span>
            </div>
        </div>

        <!-- The Letter -->
        <div class="letter-container fade-in-up" style="animation-delay: 0.6s;">
            <p><strong>Mushii</strong>, from the moment our paths aligned, I felt a shift in gravity. In this vast, digital expanse, your soul shone with a distinct luminescence—a supernova in a sea of dim stars. You possessed a beauty you rarely acknowledged, like a galaxy unaware of its own breathtaking spiral.</p>
            
            <p>For as the ages of the wind had forbid but a love that spiralled from the depth of a future, extinguished by the sword of infidelity. I wish it had gone not by that sword. </p>
            
            <p>Though I may have not shown it, I truly did love you. I loved your simple joys, to hear that you are happy and doing well, though I would get busy each moment I would take time to reflect on your beauty.</p>
            
            <p>But life, like entropy, is a powerful force. The weight of obligations and infidelity acted like dark matter, slowly expanding the space between us. The force grew shorter, the gentle fire of love, slower. A regret by the cosmos for allowing that gravity to pull us apart, transforming our binary star system into solitary wanderers.</p>
            
            <p>Yet, know this: My love for you remains a constant in the equation of my life. I am releasing you now, with forgiveness in my heart and hope you enjoy life with your true love. A star as bright as you deserves to orbit freely, unencumbered by the anchors of my own stillness.</p>
            
            <p>Thank you for the dance we had among the stars.  Always, my Mushii </p>
        </div>

        <div class="signature fade-in-up" style="animation-delay: 0.8s;">
           Aecha
        </div>
    </div>

    <script>
        /* --- 1. Enhanced Cosmic Background with Warp & Nebula --- */
        const canvas = document.getElementById('universe');
        const ctx = canvas.getContext('2d');
        const nebulaCanvas = document.getElementById('nebula-layer');
        const nebulaCtx = nebulaCanvas.getContext('2d');
        const particlesCanvas = document.getElementById('particles-layer');
        const particlesCtx = particlesCanvas.getContext('2d');
        
        let width, height;
        
        // Star class with enhanced visuals
        class Star {
            constructor() {
                this.reset(true);
            }

            reset(initial) {
                this.x = (Math.random() - 0.5) * width * 2;
                this.y = (Math.random() - 0.5) * height * 2;
                this.z = initial ? Math.random() * 2000 : 2000;
                this.size = Math.random() * 2.5 + 0.5;
                this.brightness = Math.random();
                
                // Color variety
                const colors = ['#ffffff', '#00f2ff', '#7b2cbf', '#ff6b9d', '#ffd700'];
                const weights = [0.6, 0.15, 0.1, 0.1, 0.05];
                const rand = Math.random();
                let sum = 0;
                for (let i = 0; i < weights.length; i++) {
                    sum += weights[i];
                    if (rand < sum) {
                        this.color = colors[i];
                        break;
                    }
                }
            }

            update(speed) {
                this.z -= speed;
                if (this.z <= 1) this.reset(false);
            }

            draw() {
                const x = (this.x / this.z) * 600 + width / 2;
                const y = (this.y / this.z) * 600 + height / 2;
                const s = (1200 / this.z) * this.size;
                const alpha = Math.min(1, (2000 - this.z) / 800) * this.brightness;

                if (x > -50 && x < width + 50 && y > -50 && y < height + 50) {
                    // Star glow
                    const gradient = ctx.createRadialGradient(x, y, 0, x, y, s * 3);
                    gradient.addColorStop(0, this.color);
                    gradient.addColorStop(0.5, this.color.replace(')', ', 0.3)').replace('rgb', 'rgba'));
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.globalAlpha = alpha;
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(x, y, s * 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Star core
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(x, y, s, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Streak effect during warp
                    if (warpSpeed > 10) {
                        ctx.strokeStyle = this.color;
                        ctx.globalAlpha = alpha * 0.5;
                        ctx.lineWidth = s * 0.5;
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        const streakLength = Math.min(warpSpeed * 2, 100);
                        const dx = (x - width/2) / 50;
                        const dy = (y - height/2) / 50;
                        ctx.lineTo(x - dx * streakLength, y - dy * streakLength);
                        ctx.stroke();
                    }
                }
            }
        }

        // Floating cosmic particles
        class CosmicParticle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 3 + 1;
                this.speedX = (Math.random() - 0.5) * 0.3;
                this.speedY = (Math.random() - 0.5) * 0.3;
                this.opacity = Math.random() * 0.5 + 0.2;
                this.pulseSpeed = Math.random() * 0.02 + 0.01;
                this.pulseOffset = Math.random() * Math.PI * 2;
                const colors = ['rgba(0, 242, 255,', 'rgba(123, 44, 191,', 'rgba(255, 107, 157,'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                
                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height;
                if (this.y > height) this.y = 0;
            }

            draw(time) {
                const pulse = Math.sin(time * this.pulseSpeed + this.pulseOffset) * 0.3 + 0.7;
                particlesCtx.globalAlpha = this.opacity * pulse;
                particlesCtx.fillStyle = this.color + this.opacity + ')';
                particlesCtx.beginPath();
                particlesCtx.arc(this.x, this.y, this.size * pulse, 0, Math.PI * 2);
                particlesCtx.fill();
            }
        }

        let stars = [];
        let cosmicParticles = [];
        let warpSpeed = 0;
        let targetSpeed = 1.5;
        let time = 0;

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            nebulaCanvas.width = width;
            nebulaCanvas.height = height;
            particlesCanvas.width = width;
            particlesCanvas.height = height;
            
            stars = Array(1000).fill().map(() => new Star());
            cosmicParticles = Array(50).fill().map(() => new CosmicParticle());
            
            drawNebula();
        }

        function drawNebula() {
            // Static nebula clouds
            const gradient1 = nebulaCtx.createRadialGradient(
                width * 0.2, height * 0.8, 0,
                width * 0.2, height * 0.8, width * 0.5
            );
            gradient1.addColorStop(0, 'rgba(123, 44, 191, 0.15)');
            gradient1.addColorStop(0.5, 'rgba(123, 44, 191, 0.05)');
            gradient1.addColorStop(1, 'transparent');
            
            nebulaCtx.fillStyle = gradient1;
            nebulaCtx.fillRect(0, 0, width, height);
            
            const gradient2 = nebulaCtx.createRadialGradient(
                width * 0.8, height * 0.2, 0,
                width * 0.8, height * 0.2, width * 0.4
            );
            gradient2.addColorStop(0, 'rgba(0, 242, 255, 0.1)');
            gradient2.addColorStop(0.5, 'rgba(0, 150, 255, 0.03)');
            gradient2.addColorStop(1, 'transparent');
            
            nebulaCtx.fillStyle = gradient2;
            nebulaCtx.fillRect(0, 0, width, height);

            const gradient3 = nebulaCtx.createRadialGradient(
                width * 0.5, height * 0.5, 0,
                width * 0.5, height * 0.5, width * 0.6
            );
            gradient3.addColorStop(0, 'rgba(255, 107, 157, 0.08)');
            gradient3.addColorStop(1, 'transparent');
            
            nebulaCtx.fillStyle = gradient3;
            nebulaCtx.fillRect(0, 0, width, height);
        }

        window.addEventListener('resize', resize);
        resize();

        function animateStars() {
            time++;
            
            // Clear with trail
            ctx.fillStyle = `rgba(5, 5, 5, ${warpSpeed > 10 ? 0.1 : 0.15})`;
            ctx.fillRect(0, 0, width, height);

            // Ease warp speed
            const speedDiff = targetSpeed - warpSpeed;
            warpSpeed += speedDiff * 0.02;

            stars.forEach(star => {
                star.update(warpSpeed);
                star.draw();
            });

            // Draw cosmic particles
            particlesCtx.clearRect(0, 0, width, height);
            cosmicParticles.forEach(particle => {
                particle.update();
                particle.draw(time);
            });

            requestAnimationFrame(animateStars);
        }
        animateStars();

        /* --- 2. Audio Visualization & Immersive Entry --- */
        const startBtn = document.getElementById('start-btn');
        const entryScreen = document.getElementById('entry-screen');
        const mainContent = document.getElementById('main-content');
        const audio = document.getElementById('bg-music');
        const visualizerContainer = document.getElementById('visualizer');

        // Generate visualizer bars
        const barCount = 35;
        for(let i = 0; i < barCount; i++) {
            const bar = document.createElement('div');
            bar.className = 'bar';
            visualizerContainer.appendChild(bar);
        }
        const bars = document.querySelectorAll('.bar');

        startBtn.addEventListener('click', () => {
            // IMMERSIVE WARP EFFECT
            warpSpeed = 80;
            targetSpeed = 80;
            
            // Gradual slowdown for "arrival" effect
            setTimeout(() => {
                targetSpeed = 20;
            }, 1500);
            
            setTimeout(() => {
                targetSpeed = 1.5;
            }, 3000);
            
            // UI Transition
            entryScreen.classList.add('hidden');
            setTimeout(() => {
                mainContent.classList.add('visible');
            }, 1000);

            // Audio Setup
            audio.play().then(() => {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const src = audioCtx.createMediaElementSource(audio);
                const analyser = audioCtx.createAnalyser();
                
                src.connect(analyser);
                analyser.connect(audioCtx.destination);
                
                analyser.fftSize = 128;
                const bufferLength = analyser.frequencyBinCount;
                const dataArray = new Uint8Array(bufferLength);

                function renderFrame() {
                    requestAnimationFrame(renderFrame);
                    analyser.getByteFrequencyData(dataArray);

                    bars.forEach((bar, index) => {
                        const value = dataArray[index % bufferLength]; 
                        const percent = (value / 255) * 100;
                        bar.style.height = Math.max(4, percent * 0.7) + 'px';
                        bar.style.opacity = 0.5 + (percent / 200);
                    });
                }
                renderFrame();
            }).catch(err => console.log("Audio play blocked:", err));
        });

        /* --- 3. Enhanced Custom Cursor --- */
        const cursorDot = document.querySelector('[data-cursor-dot]');
        const cursorOutline = document.querySelector('[data-cursor-outline]');
        const interactiveElements = document.querySelectorAll('button, a, .hologram-card');

        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;

            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;

            cursorOutline.animate({
                left: `${posX}px`,
                top: `${posY}px`
            }, { duration: 400, fill: "forwards" });
        });

        interactiveElements.forEach(el => {
            el.addEventListener('mouseenter', () => cursorOutline.classList.add('hovering'));
            el.addEventListener('mouseleave', () => cursorOutline.classList.remove('hovering'));
        });

        /* --- 4. Scroll Progress & Parallax --- */
        const scrollProgress = document.getElementById('scroll-progress');
        
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = scrollTop / docHeight;
            
            scrollProgress.style.transform = `scaleX(${scrollPercent})`;
            
            // Subtle parallax on nebula
            nebulaCanvas.style.transform = `translateY(${scrollTop * 0.1}px)`;
        });

        /* --- 5. Generate Ambient Particles --- */
        const ambientContainer = document.getElementById('ambient-particles');
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (Math.random() * 15 + 10) + 's';
            particle.style.animationDelay = (Math.random() * 10) + 's';
            particle.style.width = (Math.random() * 4 + 2) + 'px';
            particle.style.height = particle.style.width;
            particle.style.background = ['#00f2ff', '#7b2cbf', '#ff6b9d', '#fff'][Math.floor(Math.random() * 4)];
            particle.style.boxShadow = `0 0 ${Math.random() * 10 + 5}px currentColor`;
            ambientContainer.appendChild(particle);
        }

        /* --- 6. Text Scramble Effect --- */
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#✦✧★☆';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span style="color: var(--gravity-cyan);">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        const title = document.querySelector('.glitch-text');
        const scrambler = new TextScramble(title);
        setTimeout(() => scrambler.setText('A FAREWELL'), 1200);

        /* --- 7. Intersection Observer for Fade Effects --- */
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in-up').forEach(el => {
            observer.observe(el);
        });

    </script>
</body>
</html>
